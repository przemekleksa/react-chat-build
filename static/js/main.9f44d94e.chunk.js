(this.webpackJsonpreact_chat=this.webpackJsonpreact_chat||[]).push([[0],{18:function(e,t,n){e.exports=n(32)},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a,s=n(0),o=n.n(s),i=n(8),c=n.n(i),r=(n(23),n(2)),l=n(3),m=n(5),u=n(4),p=(n(24),n(15)),g=n(10),d=(n(25),n(26),function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={username:""},e.handleClick=function(){e.props.toggle()},e.changeName=function(t){localStorage.setItem("username",e.state.username)},e.myChangeHandler=function(t){e.setState({username:t.target.value})},e}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal_content"},o.a.createElement("div",{className:"container"},o.a.createElement("div",null,o.a.createElement("span",null),o.a.createElement("span",{className:"close",onClick:this.handleClick,id:"close"},"\xd7   ")),o.a.createElement("p",null,"Enter your username"),o.a.createElement("form",{onSubmit:this.changeName},o.a.createElement("input",{type:"text",name:"username",onChange:this.myChangeHandler}),o.a.createElement("input",{type:"submit",value:"Accept",className:"submit"})))))}}]),n}(s.Component)),h=n(7),E=new p.a("ws://st-chat.shas.tel"),v=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onButtonClicked=function(t){t.preventDefault(),console.log(e.props),E.send(JSON.stringify({from:e.props.username,message:e.props.message})),document.getElementById("form").reset(),e.props.addMessage("")},e.myChangeHandler=function(t){t.target.name;var n=t.target.value;e.props.addMessage(n)},e.togglePop=function(){e.props.wasSeen(!e.props.seen)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(localStorage.getItem("username")),console.log(this.props),null===this.props.username&&this.props.setUsername("Guest"),E.onopen=function(){console.log("websocket client connected")},E.addEventListener("message",(function(e){var t=document.getElementById("m");t.innerHTML=JSON.parse(e.data).map((function(e,t){var n=new Date(e.time),a=n.getHours(),s=n.getMinutes();return a<10&&(a="0"+a),s<10&&(s="0"+s),"<p class='ms'><span id='msg'>".concat(e.message,"</span></p><p><span>").concat(e.from,"</span> <span id='time'>").concat(a,":").concat(s,"</span> </p>")})).join("")+t.innerHTML,a=JSON.parse(e.data)})),setTimeout((function(){e.setState({msgs:a}),console.log(a),e.props.addMessages(a)}),1e3),E.onclose=function(e){console.log("websocket client disconnected",e.code,e.reason)},null===this.props.username&&this.props.wasSeen(!0)}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.visibility&&(document.title="React Chat App"),console.log("msglist componentDidUpdate visibility",this.props.visibility),setTimeout((function(){var e;void 0===t.state.msgs?e={id:0}:void 0!==t.state.msgs[0]&&(e=t.state.msgs[0].id),void 0===a[0]&&(a[0]={id:0}),a[0].id!==e&&(console.log(a[0].id,e),t.props.visibility||(document.title="New messages")),t.setState({msgs:a})}),1e3)}},{key:"updateState",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(g.a,{onChange:this.handleVisibilityChange}),o.a.createElement("div",{className:"name"},o.a.createElement("h1",null,"Hello ",this.props.username),o.a.createElement("div",{className:"btn",onClick:this.togglePop},o.a.createElement("button",{id:"change-name"},"Change name"))),this.props.seen?o.a.createElement(d,{toggle:this.togglePop}):null,o.a.createElement("form",{onSubmit:this.onButtonClicked,id:"form",autoComplete:"off"},o.a.createElement("input",{id:"message",type:"text",name:"message",onChange:this.myChangeHandler}),o.a.createElement("button",{type:"submit",value:"",className:"submit"}," ",o.a.createElement("i",{className:"fas fa-paper-plane"}))),o.a.createElement("div",{id:"m"}))}}]),n}(s.Component),f=Object(h.b)((function(e){return{msgNum:e.msgNum,seen:e.seen,username:e.username,msgs:e.msgs,message:e.message,oldMsgs:e.oldMsgs}}),(function(e){return{wasSeen:function(t){e({type:"TOGGLE_SEEN",seen:t})},addMessage:function(t){e({type:"ADD_MESSAGE",msg:t})},setUsername:function(t){e({type:"SET_USERNAME",username:t})},addMessages:function(t){e({type:"ADD_MESSAGES",messages:t})}}}))(v),b=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={visibility:!0},e.handleVisibilityChange=function(t){e.setState({visibility:t}),console.log("isvisible app.js",t)},e}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(g.a,{onChange:this.handleVisibilityChange},o.a.createElement(f,{visibility:this.state.visibility})))}}]),n}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=n(9),S=n(1),O={msgNum:0,seen:!1,username:localStorage.getItem("username"),message:"",msgs:"try this"},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_SEEN"===t.type?Object(S.a)(Object(S.a)({},e),{},{seen:t.seen}):"ADD_MESSAGE"===t.type?Object(S.a)(Object(S.a)({},e),{},{message:t.msg}):"SET_USERNAME"===t.type?Object(S.a)(Object(S.a)({},e),{},{username:t.username}):(t.type="ADD_MESSAGES")?Object(S.a)(Object(S.a)({},e),{},{msgs:t.messages}):(t.type="TOGGLE_VISIBILITY")?Object(S.a)(Object(S.a)({},e),{},{visibility:t.visibility}):e},j=Object(y.b)(N,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(o.a.createElement(h.a,{store:j},o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.9f44d94e.chunk.js.map